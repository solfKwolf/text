# 修复 Service Worker 注册失败问题计划

## 任务目标

修复 Service Worker 注册失败的问题，确保 PWA 能够在 `https://solfkwolf.github.io/text/` 子路径下正常工作。

## 执行步骤

### 1. 分析现有配置

* 检查 `index.html` 中的 Service Worker 注册代码

* 检查 `manifest.json` 中的 scope 和 start\_url 配置

* 检查 `service-worker.js` 中的缓存策略

### 2. 修改 Service Worker 注册代码

* 更新 `index.html` 中的 Service Worker 注册代码

* 指定正确的 `scope` 和 `scriptURL`，使用 `/text/` 子路径

* 确保注册路径与实际部署路径匹配

### 3. 更新 manifest.json 配置

* 修改 `start_url` 为 相对路径 `./`

* 更新 `scope` 为 `/text/`

* 确保所有图标和资源路径正确

### 4. 调整 service-worker.js

* 确保缓存策略正确处理子路径

* 更新缓存键和资源路径

* 确保 fetch 事件处理正确的路径

### 5. 构建和部署

* 运行 `npm run build` 构建应用

* 确保构建产物正确部署到 `/text/` 子路径

* 验证 Service Worker 注册是否成功

### 6. 测试 PWA 功能

* 验证安装提示是否正常显示

* 测试离线访问功能

* 验证添加到主屏幕功能

## 预期结果

* Service Worker 成功注册

* PWA 功能正常工作

* 应用可以在 `/text/` 子路径下正常访问

* 离线访问和安装功能正常

